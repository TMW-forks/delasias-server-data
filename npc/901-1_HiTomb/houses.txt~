// The house could be bought, allowing player to enter. Inside could be a small location with extra services for player  - like free heal, menhir, storage or teleport to favorite location... 

028-1.gat,63,43,0	script	#hut	127, {

set @HarvestDelay, 3600000; //Harvest delay in miliseconds

if ( isat( "028-1.gat", 63, 44) ) goto Good_pos;
	mes "The door seems to be closed.";
	close;

OnEnough:
	set hitomb_fl_ready, 2;
	end;
	
Good_pos:
	if( house_hitomb == 1 ) goto Aenter;
	mes "The door is closed.";
	close;

Aenter:
	if ( hitomb_fl_pots < 1 ) set hitomb_fl_pots, 1;
	if ( hitomb_fl_ready == 2) goto F_ready;
	if ( hitomb_fl_ready == 1 ) goto F_engaged;
	mes "Your hut welcomes you!";
	menu
		"Have a rest", L_rest,
		"Plant a seed", L_plant,
		"Leave", L_end;	

F_engaged:
	mes "Your hut welcomes you!";
	menu
		"Have a rest", L_rest,
		"Leave", L_end;	

F_ready:
	mes "[Flowerpot] Time to harvest your plants!";
	getitem hitomb_fl_planted, (rand(10) + 15) + ((rand(4) + 5) * (hitomb_fl_pots - 1));
	set hitomb_fl_ready, 0;
	goto Aenter;

L_rest:
	heal 10000, 10000;
	mes "You woke up strong and fresh.";
	close;

L_plant:
	mes "[Flowerpot] What do you want to plant?";
	menu
		"Mauve Plant", P_mauve,
		"Cobalt Plant", P_cobalt,
		"Gamboge Plant", P_gamboge,
		"Alizarin Plant", P_alizarin,
		"Nothing", L_end;

P_mauve:
	if (countitem(5001) < 1) goto P_noseed;
	delitem "MauveSeed", 1;
	set hitomb_fl_planted, 680;
	set hitomb_fl_ready, 1;
	addtimer @HarvestDelay,"#hut::OnEnough";
	mes "[Flowerpot] The Mauve Plant has been planted!";
	close;

P_cobalt:
	if (countitem(5002) < 1) goto P_noseed;
	delitem "CobaltSeed", 1;
	set hitomb_fl_planted, 681;
	set hitomb_fl_ready, 1;
	addtimer @HarvestDelay,"#hut::OnEnough";
	mes "[Flowerpot] The Cobalt Plant has been planted!";
	close;

P_gamboge:
	if (countitem(5003) < 1) goto P_noseed;
	delitem "GambogeSeed", 1;
	set hitomb_fl_planted, 682;
	set hitomb_fl_ready, 1;
	addtimer @HarvestDelay,"#hut::OnEnough";
	mes "[Flowerpot] The Gamboge Plant has been planted!";
	close;

P_alizarin:
	if (countitem(5004) < 1) goto P_noseed;
	delitem "AlizarinSeed", 1;
	set hitomb_fl_planted, 683;
	set hitomb_fl_ready, 1;
	addtimer @HarvestDelay,"#hut::OnEnough";
	mes "[Flowerpot] The Alizarin Plant has been planted!";
	close;

P_noseed:
	mes "[Flowerpot] You don't have any seed!";
	close;

L_end:
	close;
}


